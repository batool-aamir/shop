!function(e){var t={};function a(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,r){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(r,n,function(t){return e[t]}.bind(null,n));return r},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t){jQuery(document).ready(function(){var e=!0;function t(e,t,a,r){for(var n=[],c=jQuery("#".concat(t," .sites-container")),i=jQuery("#mwpal-wsal-child-sites"),o=0;o<a.length;o++)jQuery(a[o]).is(":checked")&&n.push(jQuery(a[o]).val());jQuery.ajax({type:"POST",url:scriptData.ajaxURL,async:!0,dataType:"json",data:{action:"update_active_wsal_sites",nonce:scriptData.scriptNonce,transferAction:r,activeSites:i.val(),requestSites:n.toString()},success:function(a){if(a.success&&n.length){for(var r=0;r<n.length;r++){var o=jQuery("<span></span>"),s=jQuery("<input />");s.attr("type","checkbox");var l=jQuery("<label></label>"),u=jQuery("#".concat(e,"-site-").concat(n[r]));s.attr("name","".concat(t,"[]")),s.attr("id","".concat(t,"-site-").concat(n[r])),s.attr("value",u.val()),l.attr("for","".concat(t,"-site-").concat(n[r])),l.html(u.parent().find("label").text()),o.append(s),o.append(l),c.append(o),u.parent().remove()}i.val(a.activeSites)}else console.log(a.message)},error:function(e,t,a){console.log(e.statusText),console.log(t),console.log(a)}})}if("activity-log"===scriptData.currentTab&&jQuery(".mwp-ssas").select2({width:313}),jQuery(".mwp-ssas").on("change",function(){var e=jQuery(this).val();jQuery("#mwpal-site-id").val(e),jQuery("#audit-log-viewer").submit()}),jQuery(".mwp-ipps").on("change",function(){var e=jQuery(this).val();jQuery(this).attr("disabled",!0),jQuery.post(scriptData.ajaxURL,{action:"set_per_page_events",count:e,nonce:scriptData.scriptNonce},function(){location.reload()})}),jQuery("#mwpal-wsal-sites-refresh").click(function(){var e=jQuery(this),t=jQuery("#mwpal-wcs-refresh-message");e.attr("disabled",!0),e.val(scriptData.refreshing),jQuery(t).show(),jQuery.post(scriptData.ajaxURL,{action:"refresh_child_sites",nonce:scriptData.scriptNonce,mwpal_forced:!0,mwpal_run_id:scriptData.runId},function(a){if(console.log(a),scriptData.runId=a.data.run_id,!0===a.data.complete)location.reload();else{var r=new Date;jQuery(t).find(".last-message-time").html(r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()),e.attr("disabled",!1),e.removeAttr("disabled"),jQuery(e).trigger("click")}})}),jQuery("#mwpal-wsal-manual-retrieve").click(function(){var e=jQuery(this);e.attr("disabled",!0),e.val(scriptData.retrieving),jQuery.post(scriptData.ajaxURL,{action:"retrieve_events_manually",nonce:scriptData.scriptNonce},function(){location.reload()})}),jQuery("#mwpal-wcs-add-btn").click(function(e){e.preventDefault(),t("mwpal-wcs","mwpal-wcs-al",jQuery("#mwpal-wcs input[type=checkbox]"),"add-sites")}),jQuery("#mwpal-wcs-remove-btn").click(function(e){e.preventDefault(),t("mwpal-wcs-al","mwpal-wcs",jQuery("#mwpal-wcs-al input[type=checkbox]"),"remove-sites")}),scriptData.infiniteScroll){var a=2;jQuery(window).scroll(function(){jQuery(window).scrollTop()===jQuery(document).height()-jQuery(window).height()&&0!==a&&(a=function(t){jQuery("#mwpal-event-loader").show("fast");var a=scriptData.userView;return(null===a||a.length<1)&&(a="list"),jQuery.ajax({type:"POST",url:ajaxurl,data:{action:"mwpal_infinite_scroll_events",mwpal_viewer_security:scriptData.scriptNonce,page_number:t,page:scriptData.page,"mwpal-site-id":scriptData.siteId,orderby:scriptData.orderBy,order:scriptData.order,"get-events":scriptData.getEvents,s:scriptData.searchTerm,filters:scriptData.searchFilters,view:a},success:function(t){jQuery("#mwpal-event-loader").hide("1000"),t?(e=!0,jQuery("#audit-log-viewer #the-list").append(t)):(e=!1,jQuery("#mwpal-auditlog-end").show("fast"))},error:function(e,t,a){console.log(e.statusText),console.log(t),console.log(a)}}),e?t+1:0}(a))})}jQuery("#mwpal-toggle-events-table>thead>tr>th>:checkbox").change(function(){jQuery(this).parents("table:first").find("tbody>tr>th>:checkbox").attr("checked",this.checked)}),jQuery("#mwpal-toggle-events-table>tbody>tr>th>:checkbox").change(function(){var e=0===jQuery(this).parents("tbody:first").find("th>:checkbox:not(:checked)").length;jQuery(this).parents("table:first").find("thead>tr>th:first>:checkbox:first").attr("checked",e)}),jQuery(".mwpal-notice").on("click",".close-btn a",function(){var e=jQuery(this),t={action:"mwpal_advert_dismissed",mwp_nonce:scriptData.scriptNonce},a=e.attr("data-notice");void 0!==a&&a.length>1&&(t.mwpal_notice_type=a),jQuery.post(ajaxurl,t,function(t){t.status&&e.parents(".mwpal-notice").remove()},"json").fail(function(e){console.log(e)})}),jQuery("#purge-trigger").on("click",{},function(){var e=jQuery(this);jQuery(e).attr("disabled",!0),jQuery.post(ajaxurl,{action:"mwpal_purge_logs",mwp_nonce:scriptData.scriptNonce},"json").fail(function(e){console.log(e)}).success(function(t){console.log(t),jQuery(e).attr("disabled",!1)})})})}]);